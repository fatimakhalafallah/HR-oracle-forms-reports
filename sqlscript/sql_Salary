DROP TABLE PAY_PAYROLLS CASCADE CONSTRAINTS ; 

CREATE TABLE PAY_PAYROLLS ( 
  ID               NUMBER        NOT NULL, 
  PAY_DATE         DATE, 
  EMP_ID           NUMBER, 
  GROSS_SALARY     NUMBER (14,2), 
  PAYROLL_STATUS   NUMBER (1)    DEFAULT 0, 
  SECTION_NO       NUMBER (5)    DEFAULT 0, 
  TR_DATE          DATE, 
  CREATED_USER     NUMBER (5), 
  CREATED_DATE     DATE, 
  MODIFIED_USER    NUMBER (5), 
  MODIFIED_DATE    DATE, 
  COMP_GROSS       NUMBER (14,2), 
  NET_SALARY       NUMBER (14,2), 
  PAY_MONTH        NUMBER (2), 
  PAY_YEAR         NUMBER (4), 
  CURRENCY_NO      NUMBER (1)    DEFAULT 1, 
  DEPART_NO        NUMBER, 
  COMP_NO          NUMBER (5), 
  POSITION_NO      NUMBER (5), 
  BANK_BRN_NO      NUMBER (5), 
  BANK_ACCOUNT_NO  VARCHAR2 (50), 
  HIRE_TYPE        NUMBER (5), 
  TAX              NUMBER (2), 
  SOCIAL           NUMBER (2), 
  A_LOCATION       NUMBER, 
  CONSTRAINT PAY_PAYROLL_UN1
    UNIQUE (EMP_ID, PAY_MONTH, PAY_YEAR), 
  CONSTRAINT PAY_PAYROLLS_PK
  PRIMARY KEY ( ID ) ) ; 

DROP TABLE PAY_PAYROLLS_LINES CASCADE CONSTRAINTS ; 

CREATE TABLE PAY_PAYROLLS_LINES ( 
  ID                    NUMBER        NOT NULL, 
  PAY_ID                NUMBER, 
  PAY_PAYROLL_TYPES_ID  NUMBER (3), 
  AMT                   NUMBER (14,2), 
  CURRECNY_NO           NUMBER (1)    DEFAULT 1, 
  EMP_ID                NUMBER (10), 
  CONSTRAINT PAY_PAYROLLS_LINES_PK
  PRIMARY KEY ( ID ) ) ; 

ALTER TABLE PAY_PAYROLLS_LINES ADD  CONSTRAINT PAY_PAYROLLS_LINES_R02
 FOREIGN KEY (PAY_PAYROLL_TYPES_ID) 
  REFERENCES PETRO.PAY_PAYROLL_ITEMS_TYPES (ID)  DISABLE ;
  
  DROP TABLE PAY_PAYROLL_TEMP CASCADE CONSTRAINTS ; 

CREATE TABLE PAY_PAYROLL_TEMP ( 
  ID                    NUMBER, 
  PAY_ID                NUMBER, 
  PAY_PAYROLL_TYPES_ID  NUMBER (3), 
  AMT                   NUMBER (14,2), 
  CURRECNY_NO           NUMBER (1), 
  EMP_ID                NUMBER (10) ) ; 


CREATE TABLE PAY_PAYROLL_ITEMS_TYPES ( 
  ID                        NUMBER (3)    NOT NULL, 
  CODE                      NUMBER (3), 
  NAME                      VARCHAR2 (100), 
  STATUS                    NUMBER (1)    DEFAULT 0, 
  CREATED_USER              NUMBER (5), 
  CREATED_DATE              DATE, 
  MODIFIED_USER             NUMBER (5), 
  MODIFIED_DATE             DATE, 
  FIX_VAR_FLAG              CHAR (1)      DEFAULT 'F', 
  SHORT_NAME                VARCHAR2 (20), 
  ACC_CODE                  VARCHAR2 (20), 
  ALLOWANCE_DEDUCTION_FLAG  CHAR (1)      DEFAULT 'A', 
  HIDDEN_FLAG               NUMBER (1)    DEFAULT 1, 
  REPORT_ORDER              NUMBER, 
  SHOW_ON_REPORT            NUMBER (1)    DEFAULT 0, 
  TAXABLE                   NUMBER (1)    DEFAULT 0, 
  REPORT_ORDER2             NUMBER, 
  CONSTRAINT PAY_ALLOWANCE_TYPES_PK
  PRIMARY KEY ( ID ) ) ; 

CREATE TABLE PAY_PAYROLL_ITEMS_SETTING ( 
  ID                    NUMBER (9)    NOT NULL, 
  PAY_PAYROLL_TYPES_ID  NUMBER (3), 
  HIRE_TYPE             NUMBER (2), 
  GRADE_NO              NUMBER (3), 
  CURRENCY_NO           NUMBER (2), 
  CAL_TYPE              VARCHAR2 (1), 
  AMT                   NUMBER (14,2), 
  AMT_RATE              NUMBER (6,3), 
  EMP_LOCATION          VARCHAR2 (1), 
  LOCK_FLAG             NUMBER (1)    DEFAULT 1, 
  ALLOWANCE_CODE        VARCHAR2 (20), 
  CREATED_USER          NUMBER (5), 
  CREATED_DATE          DATE, 
  MODIFIED_USER         NUMBER (5), 
  MODIFIED_DATE         DATE, 
  EAMT                  NUMBER (8,2), 
  COMP_NO               NUMBER (5)    DEFAULT 28, 
  EXEMPT_AMT            NUMBER (8,2), 
  SETTING_DATE          DATE, 
  SETTING_DATE2         DATE, 
  CONSTRAINT PAY_ITEMS_SETTING_PK
  PRIMARY KEY ( ID ) ) ; 

ALTER TABLE PAY_PAYROLL_ITEMS_SETTING ADD  CONSTRAINT PAY_PAYROLL_SETTING_FK1
 FOREIGN KEY (COMP_NO) 
  REFERENCES PETRO.LKP_DIVISIONS (DIVISION_NO) ;

ALTER TABLE PAY_PAYROLL_ITEMS_SETTING ADD  CONSTRAINT PAY_PAYROLL_ITEMS_SETTING_R01
 FOREIGN KEY (PAY_PAYROLL_TYPES_ID) 
  REFERENCES PETRO.PAY_PAYROLL_ITEMS_TYPES (ID) ;



